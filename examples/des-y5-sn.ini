[runtime]
; The emcee sampler, which uses the Goodman & Weare algorithm
sampler = emcee
root = ${PWD}
resume=T
verbosity = quiet

[emcee]
; The emcee sampler uses the concept of walkers, a collection
; of live points.  Sampling is done along lines that connect
; pairs of walkers.  The number of walkers must be at least
; 2*nparam + 1, but in general more than that usually works
; better.
walkers = 32
; This many samples is overkill, just to make the plots
; look a lot nicer
samples = 300
; This is the interval at which convergence diagnostics
; are performed
nsteps = 10




[output]
filename = output/des-y5-sn-ccl.txt
format = text

[pipeline]
modules = consistency ccl desy5
values = examples/des-y5-sn-values.ini

[desy5]
file = likelihood/des-sn/des_y5_sn_likelihood.py
likelihood_only = T

[test]
save_dir=output/des-y5-sn

[astropy]
file = background/astropy_background/astropy_background.py
model = lambdacdm
nz = 200
zmax = 2.0


[camb]
; For background-only data we do not need a full
; Boltzmann evaluation, just D(z), etc.
; Setting mode=background means we get this.
file = boltzmann/camb/camb_interface.py
mode = background
feedback = 0

; We need quite fine redshift spacing, because the supernovae
; go down to low z where things are pretty sensitive
nz_background = 200
zmin_background = 0.0
zmax_background = 2.0

[pantheon]
file = likelihood/pantheon/pantheon.py
likelihood_only = T

; The Riess 11 likelihood anchors H0 for us
[riess21]
file = likelihood/riess21/riess21.py


; The consistency module translates between our chosen parameterization
; and any other that modules in the pipeline may want (e.g. camb)
[consistency]
file = utility/consistency/consistency_interface.py




[ccl]
file = structure/ccl/cl_with_ccl_modular.py

; ===== GENERAL COMPUTATION CONTROL =====
; Enable/disable major computation categories
compute_background = T
compute_power_spectra = F
compute_growth = F
compute_halo_model = F

; ===== ANGULAR POWER SPECTRA =====
; Control which angular power spectra to compute
compute_gc = T                    ; Galaxy clustering
compute_shear = T                 ; Weak lensing shear
compute_cross = T                 ; Galaxy-shear cross-correlation
compute_cmb_lensing = F          ; CMB lensing
compute_isw = F                  ; Integrated Sachs-Wolfe
compute_tsz = F                  ; Thermal Sunyaev-Zeldovich
compute_cib = F                  ; Cosmic infrared background

; ===== CORRELATION FUNCTIONS =====
; Angular correlation functions with advanced CCL options
compute_xi = F                   ; Enable angular correlation function computation
xi_type = "gg+"                 ; Type: "gg+", "gg-", "ll+", "ll-", "nn", "ng", "galaxy_shear", "shear+", "shear-"
xi_method = "fftlog"            ; Method: "fftlog", "bessel", "legendre"
theta_min = 0.1                 ; Minimum angle (arcmin)
theta_max = 300.0               ; Maximum angle (arcmin)
n_theta = 50                    ; Number of angular bins

; 3D correlation functions
compute_xi_3d = F               ; Enable 3D correlation functions
compute_xi_rsd = F              ; Enable RSD correlation functions
compute_xi_multipoles = F       ; Enable correlation multipoles
r_min_3d = 0.1                  ; Minimum distance (Mpc)
r_max_3d = 200.0                ; Maximum distance (Mpc)
n_r_3d = 50                     ; Number of distance bins
z_eval_3d = 0.5                 ; Redshift for evaluation
rsd_beta = 0.5                  ; RSD parameter f/b
multipole_ells = "0 2 4"        ; Multipoles to compute

; ===== CCL COSMOLOGY SETUP =====
; Core CCL configuration
transfer_function = "boltzmann_camb"    ; Options: "bbks", "boltzmann_class", "boltzmann_camb", "boltzmann_isitgr"
matter_power_spectrum = "camb"          ; Options: "linear", "halofit", "camb"
halofit_version = "mead2020"           ; Options: "mead2020", "mead2020_feedback"

; Optional CAMB parameters
; camb_kmax = 50.0                ; Maximum k for CAMB (h/Mpc)
; camb_lmax = 5000                ; Maximum l for CAMB

; ===== EMULATOR SUPPORT =====
; Advanced emulator options for high-accuracy predictions
use_emulator_pk = F                     ; Use emulator for power spectrum
emulator_pk_type = "baccoemu"          ; Options: "baccoemu", "euclid_emulator2", "cosmic_emu"
use_emulator_tf = F                     ; Use emulator for transfer function
emulator_tf_type = "baccoemu"          ; Options: "baccoemu"

; ===== ADVANCED COSMOLOGY PARAMETERS =====
T_ncdm = 0.0                           ; Neutrino temperature (0.0 = default)
use_sigma8_cb = F                      ; Use sigma8_cb instead of total matter sigma8

; ===== MAGNIFICATION BIAS =====
; Enable magnification bias effects in tracers
use_magnification = F                   ; Enable magnification bias
magnification_alpha = 2.5             ; Slope parameter (typical value ~2.5)

; ===== PERTURBATIVE TRACERS =====
; Advanced bias modeling with perturbative calculators
use_perturbative_bias = F              ; Enable perturbative bias calculators
perturbative_bias_type = "bacco_lbias" ; Options: "bacco_lbias"
log10k_min_pt = -4.0                  ; Min k for perturbative calculations
log10k_max_pt = 2.0                   ; Max k for perturbative calculations
nk_per_decade_pt = 20                 ; k sampling density

; ===== BARYONIC EFFECTS =====
; Modeling of baryonic feedback effects
baryonic_model = "none"         ; Options: "none", "baccoemu", "schneider"

; ===== MODIFIED GRAVITY =====
; Extensions beyond Lambda-CDM
mg_model = "none"               ; Options: "none", "mu_sigma"

; ===== HALO MODEL CONFIGURATION =====
; Only used if compute_halo_model = T
halo_mass_function = "tinker08"      ; Options: "tinker08", "tinker10", "watson13", "bocquet16"
halo_bias = "tinker10"              ; Options: "tinker10", "sheth99", "bhattacharya11"
halo_concentration = "duffy2008"     ; Options: "duffy2008", "bhattacharya13", "prada12"
halo_profile = "nfw"                ; Options: "nfw", "einasto", "hernquist"
mass_definition = "200m"            ; Options: "200m", "200c", "vir", "500c"

; ===== ELL CONFIGURATION =====
; Define multipole range for angular power spectra
ell_min_logspaced = 10.0        ; Minimum ell
ell_max_logspaced = 10000.0     ; Maximum ell
n_ell_logspaced = 100           ; Number of ell points

; Alternative: specify custom ell values
; ell_values = "10 20 30 50 100 200 500 1000 2000 5000 10000"

; ===== REDSHIFT AND K RANGES =====
; Ranges for power spectra and background quantities
z_min = 0.0                     ; Minimum redshift
z_max = 3.0                     ; Maximum redshift
n_z = 301                       ; Number of redshift points

k_min = 1.0e-4                  ; Minimum k (h/Mpc)
k_max = 10.0                    ; Maximum k (h/Mpc)
n_k = 200                       ; Number of k points

; ===== ACCURACY PARAMETERS =====
; Control computation accuracy vs speed for angular_cl
limber_integration = T          ; Use Limber approximation
non_limber_max_ell = 100       ; Max ell for exact (non-Limber) integration
integration_method = "qag_quad" ; Integration method: "qag_quad", "spline", "riemann"
relative_tolerance = 1.0e-4     ; Relative tolerance for integration
absolute_tolerance = 0.0        ; Absolute tolerance for integration

; Advanced angular_cl sampling parameters
p_of_k_a = "delta_matter:delta_matter"  ; Power spectrum to use
l_logstep = 1.15                ; Logarithmic ell step size
l_linstep = 40.0                ; Linear ell step size
dchi = -1.0                     ; Radial step size (Mpc, -1 for automatic)
dlnchi = -1.0                   ; Log radial step size (-1 for automatic)

; ===== EXAMPLE USAGE NOTES =====
; This configuration provides a comprehensive setup for CCL within CosmoSIS.
; 
; Key features enabled:
; - Background cosmology (distances, Hubble parameter, age)
; - Linear and non-linear matter power spectra
; - Growth factors and growth rate
; - Angular power spectra for galaxy clustering, weak lensing, and cross-correlations
;
; To enable additional features:
; - Set compute_halo_model = T for halo model calculations
; - Set compute_xi = T for real-space correlation functions
; - Set compute_cmb_lensing = T for CMB lensing cross-correlations
; - Change baryonic_model to "baccoemu" for baryonic feedback effects
; - Change mg_model to "mu_sigma" for modified gravity
;
; The module expects the following data to be present in the pipeline:
; - Cosmological parameters in [cosmological_parameters]
; - Source redshift distributions in [nz_source] (for weak lensing)
; - Lens redshift distributions in [nz_lens] (for galaxy clustering)
; - Galaxy bias values in [bin_bias] (for galaxy clustering)
; - Intrinsic alignment parameters in [intrinsic_alignment_parameters] (optional)
